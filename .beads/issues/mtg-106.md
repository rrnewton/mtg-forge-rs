---
title: Avoid Invalid game action irrespective of controller
status: open
priority: 2
issue_type: task
created_at: "2025-10-27T08:23:07-07:00"
updated_at: "2025-10-27T08:23:07-07:00"
---

Simply executing the TUI to play games shows attempted invalid actions:

```
$ cargo run --bin mtg -- tui test_decks/white_aggro_4ed.dck test_decks/white_aggro_4ed.dck --p1=heuristic --p2=random
...
  >>> RANDOM: chose spell/ability 1 out of choices 0-2
  Bob casts Serra Angel (86) (putting on stack)
  Serra Angel (86) resolves
  Serra Angel (86) enters the battlefield as a 4/4 creature
  >>> RANDOM: chose to pass priority (30% probability triggered) out of 1 available actions
  >>> RANDOM: chose creature 0 to attack (50% probability) out of 4 available creatures
  >>> RANDOM: chose creature 1 to attack (50% probability) out of 4 available creatures
  >>> RANDOM: chose creature 3 to attack (50% probability) out of 4 available creatures
  Bob declares Serra Angel (84) (4/4) as attacker
  Bob declares Serra Angel (83) (4/4) as attacker
  Error declaring attacker: Invalid game action: Creature has summoning sickness and can't attack this turn
```

Our goal is to only expose VALID options as choices. So even a random controller should never make an invalid choice.
The options presented need to be prefiltered for legality according to MTGs rules.

Reproduce the above bug and fix it, but also fix or document anywhere else you see such invalid actions being made by "successful" game executions.
