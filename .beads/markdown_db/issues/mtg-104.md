---
title: Split snapshot stress test into per-deck script and parallel runner
status: closed
priority: 3
issue_type: task
depends_on:
  mtg-89: blocks
created_at: "2025-10-27T15:02:34Z"
updated_at: "2025-10-28T00:00:00-07:00"
closed_at: "2025-10-28T00:00:00-07:00"
---

# Description

Split the stress test into:
1. A script that tests one deck (snapshot_stress_test_single.py)
2. A shell script that calls the first script in parallel using gnu parallel

This will allow faster testing of multiple decks and make it easier to run individual deck tests during debugging.

Example:
```bash
./run_stress_tests.sh royal_assassin white_aggro_4ed grizzly_bears
```

Should use gnu parallel like other scripts in the project.

# Resolution

Completed. Created two new scripts:
1. `scripts/snapshot_stress_test_single.py` - Tests a single deck with specified controller matchup
2. `tests/run_stress_tests.sh` - Runs tests in parallel using GNU parallel (jobs=2)

Performance improvement:
- Old sequential version: 4.863s for 6 tests
- New parallel version: 2.642s for 6 tests
- Speedup: ~46% faster

The parallel runner supports:
- Running all default decks: `./tests/run_stress_tests.sh`
- Running specific decks: `./tests/run_stress_tests.sh royal_assassin grizzly_bears`
- Sequential fallback: `./tests/run_stress_tests.sh --sequential`

The single-deck script can be used for debugging:
```bash
./scripts/snapshot_stress_test_single.py decks/royal_assassin.dck heuristic heuristic
```
